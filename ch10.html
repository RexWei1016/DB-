<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.3/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.3/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.3/dist/index.js"></script><script>(()=>{setTimeout(()=>{const{markmap:k,mm:q}=window,A=new k.Toolbar;A.attach(q);const D=A.render();D.setAttribute("style","position:absolute;bottom:20px;right:20px"),document.body.append(D)})})()</script><script>((n,P,F,I)=>{const V=n();window.mm=V.Markmap.create("svg#mindmap",(P||V.deriveOptions)(I),F)})(()=>window.markmap,null,{"content":"基本查詢處理與最佳化心智圖","children":[{"content":"1. 導論","children":[{"content":"<strong>關鍵知識點</strong>: 查詢語句的執行過程","children":[{"content":"<strong>對應知識</strong>:","children":[{"content":"SQL語句由程式執行並交由DBMS處理。","children":[],"payload":{"tag":"li","lines":"5,6"}},{"content":"處理完後，結果回傳給執行中的程式。","children":[],"payload":{"tag":"li","lines":"6,8"}}],"payload":{"tag":"li","lines":"4,8"}}],"payload":{"tag":"li","lines":"3,8"}}],"payload":{"tag":"h2","lines":"2,3"}},{"content":"2. SQL敘述的處理流程","children":[{"content":"<strong>主要步驟</strong>:","children":[{"content":"1. <strong>SQL剖析器</strong>：生成初步處理方案。","children":[],"payload":{"tag":"li","lines":"12,13","listIndex":1}},{"content":"2. <strong>查詢最佳化模組</strong>：優化處理方案。","children":[],"payload":{"tag":"li","lines":"13,14","listIndex":2}},{"content":"3. <strong>查詢執行模組</strong>：執行優化方案。","children":[],"payload":{"tag":"li","lines":"14,15","listIndex":3}}],"payload":{"tag":"li","lines":"11,15"}},{"content":"<strong>查詢樹優化</strong>:","children":[{"content":"下推<code>SELECT</code>操作，接近葉節點。","children":[],"payload":{"tag":"li","lines":"16,17"}},{"content":"優先處理條件嚴格的選擇操作。","children":[],"payload":{"tag":"li","lines":"17,18"}},{"content":"合併相鄰的中間節點，減少運算成本。","children":[],"payload":{"tag":"li","lines":"18,19"}}],"payload":{"tag":"li","lines":"15,19"}},{"content":"<strong>最佳化目標</strong>:","children":[{"content":"最小化執行時間。","children":[],"payload":{"tag":"li","lines":"20,21"}},{"content":"提升硬碟I/O效率。","children":[],"payload":{"tag":"li","lines":"21,23"}}],"payload":{"tag":"li","lines":"19,23"}}],"payload":{"tag":"h2","lines":"10,11"}},{"content":"3. SQL查詢樹","children":[{"content":"<strong>結構與功能</strong>:","children":[{"content":"<strong>葉節點</strong>: 資料表。","children":[],"payload":{"tag":"li","lines":"27,28"}},{"content":"<strong>中間節點</strong>: 操作（如選擇、投影、連接）。","children":[],"payload":{"tag":"li","lines":"28,29"}}],"payload":{"tag":"li","lines":"26,29"}},{"content":"<strong>優化策略</strong>:","children":[{"content":"使用索引取代資料頁循序搜尋。","children":[],"payload":{"tag":"li","lines":"30,31"}},{"content":"合併重複運算節點，減少處理量。","children":[],"payload":{"tag":"li","lines":"31,32"}},{"content":"提前篩選資料以降低後續操作成本。","children":[],"payload":{"tag":"li","lines":"32,34"}}],"payload":{"tag":"li","lines":"29,34"}}],"payload":{"tag":"h2","lines":"25,26"}},{"content":"4. 查詢成本估算指標","children":[{"content":"<strong>關鍵成本</strong>:","children":[{"content":"1. 硬碟存取成本（最重要）。","children":[],"payload":{"tag":"li","lines":"38,39","listIndex":1}},{"content":"2. CPU計算成本。","children":[],"payload":{"tag":"li","lines":"39,40","listIndex":2}},{"content":"3. 網路通訊成本。","children":[],"payload":{"tag":"li","lines":"40,41","listIndex":3}}],"payload":{"tag":"li","lines":"37,41"}},{"content":"<strong>運算成本差異</strong>:","children":[{"content":"<strong>存取成本</strong>:","children":[{"content":"SELECT依賴索引效率。","children":[],"payload":{"tag":"li","lines":"43,44"}},{"content":"JOIN受資料塊數量影響。","children":[],"payload":{"tag":"li","lines":"44,45"}}],"payload":{"tag":"li","lines":"42,45"}},{"content":"<strong>計算成本</strong>:","children":[{"content":"聚合操作需掃描整表。","children":[],"payload":{"tag":"li","lines":"46,47"}},{"content":"排序操作會增加額外開銷。","children":[],"payload":{"tag":"li","lines":"47,48"}}],"payload":{"tag":"li","lines":"45,48"}}],"payload":{"tag":"li","lines":"41,48"}},{"content":"<strong>選擇最佳方案</strong>:","children":[{"content":"預測每操作I/O開銷。","children":[],"payload":{"tag":"li","lines":"49,50"}},{"content":"比較不同執行計劃的總成本。","children":[],"payload":{"tag":"li","lines":"50,51"}},{"content":"選擇成本最低方案。","children":[],"payload":{"tag":"li","lines":"51,53"}}],"payload":{"tag":"li","lines":"48,53"}}],"payload":{"tag":"h2","lines":"36,37"}},{"content":"5. SELECT的運算與成本估算","children":[{"content":"<strong>運算方式</strong>:","children":[{"content":"單一屬性SELECT的三種方法：","children":[{"content":"1. 資料頁循序搜尋（SL）。","children":[],"payload":{"tag":"li","lines":"58,59","listIndex":1}},{"content":"2. 利用索引結構（SI）。","children":[],"payload":{"tag":"li","lines":"59,60","listIndex":2}},{"content":"3. 利用群聚索引結構（SIC）。","children":[],"payload":{"tag":"li","lines":"60,61","listIndex":3}}],"payload":{"tag":"li","lines":"57,61"}}],"payload":{"tag":"li","lines":"56,61"}},{"content":"<strong>處理多條件</strong>:","children":[{"content":"<code>AND</code>條件：優先篩選幅度最小的條件。","children":[],"payload":{"tag":"li","lines":"62,63"}},{"content":"<code>OR</code>條件：合併條件結果並去重。","children":[],"payload":{"tag":"li","lines":"63,64"}}],"payload":{"tag":"li","lines":"61,64"}},{"content":"<strong>索引結構對比</strong>:","children":[{"content":"<strong>複合索引</strong>：多屬性組合作為單一索引，提升效率。","children":[],"payload":{"tag":"li","lines":"65,66"}},{"content":"<strong>多索引結構</strong>：每個屬性獨立索引，靈活但效率低。","children":[],"payload":{"tag":"li","lines":"66,68"}}],"payload":{"tag":"li","lines":"64,68"}}],"payload":{"tag":"h2","lines":"55,56"}},{"content":"6. 外部排序法","children":[{"content":"<strong>實現流程</strong>:","children":[{"content":"1. 將資料分塊並排序。","children":[],"payload":{"tag":"li","lines":"72,73","listIndex":1}},{"content":"2. 合併已排序的資料塊。","children":[],"payload":{"tag":"li","lines":"73,74","listIndex":2}}],"payload":{"tag":"li","lines":"71,74"}},{"content":"<strong>成本計算</strong>:","children":[{"content":"當主記憶體容量足夠：總成本為 <code>4bR</code>。","children":[],"payload":{"tag":"li","lines":"75,76"}},{"content":"當容量不足：增加排序回合，總成本按 ( bR \\log_2 bR ) 計算。","children":[],"payload":{"tag":"li","lines":"76,77"}}],"payload":{"tag":"li","lines":"74,77"}},{"content":"<strong>用途</strong>:","children":[{"content":"支援ORDER BY操作。","children":[],"payload":{"tag":"li","lines":"78,79"}},{"content":"提升JOIN操作效率。","children":[],"payload":{"tag":"li","lines":"79,81"}}],"payload":{"tag":"li","lines":"77,81"}}],"payload":{"tag":"h2","lines":"70,71"}}],"payload":{"tag":"h1","lines":"0,1"}},null)</script>
</body>
</html>
